"use strict";(self.webpackChunkgincumentation=self.webpackChunkgincumentation||[]).push([[853],{3707:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var i=s(5893),t=s(1151);const r={sidebar_position:2},a="Context",l={id:"http/context",title:"Context",description:"In Gin, Context is a struct that contains all the necessary information about a request, its corresponding response, and other middlewares. It's passed to each handler and middleware, allowing them to interact with the incoming HTTP request and construct a response.",source:"@site/docs/http/context.md",sourceDirName:"http",slug:"/http/context",permalink:"/gincumentation/docs/http/context",draft:!1,unlisted:!1,editUrl:"https://github.com/filipenevs/gincumentation/tree/main/docs/http/context.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"apiSidebar",previous:{title:"Routing",permalink:"/gincumentation/docs/http/routing"},next:{title:"Middleware",permalink:"/gincumentation/docs/http/middleware"}},o={},d=[{value:"Uses",id:"uses",level:2},{value:"Basic Example Usage",id:"basic-example-usage",level:2},{value:"Access Request Data",id:"access-request-data",level:3},{value:"Modify Response",id:"modify-response",level:3},{value:"Middleware Communication",id:"middleware-communication",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Timeouts and Cancellation",id:"timeouts-and-cancellation",level:3},{value:"File Upload Handling",id:"file-upload-handling",level:3},{value:"Security and Authorization",id:"security-and-authorization",level:3},{value:"Session Management",id:"session-management",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"context",children:"Context"}),"\n",(0,i.jsxs)(n.p,{children:["In Gin, ",(0,i.jsx)(n.code,{children:"Context"})," is a struct that contains all the necessary information about a request, its corresponding response, and other middlewares. It's passed to each handler and middleware, allowing them to interact with the incoming HTTP request and construct a response."]}),"\n",(0,i.jsx)(n.h2,{id:"uses",children:"Uses"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"Context"})," is a powerful tool that encapsulates a wide range of functionalities, making it easier to build and manage complex web applications in Go. Its versatility allows developers to handle requests and responses efficiently, enforce security measures, and maintain the application's state across different stages of request processing:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Access Request Data:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Query Parameters:"})," Retrieve query string values. Useful for ",(0,i.jsx)(n.code,{children:"GET"})," requests where parameters are encoded in the URL."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Form Values:"})," Access ",(0,i.jsx)(n.code,{children:"POST"})," or ",(0,i.jsx)(n.code,{children:"PUT"})," request data encoded as ",(0,i.jsx)(n.code,{children:"application/x-www-form-urlencoded"})," or ",(0,i.jsx)(n.code,{children:"multipart/form-data"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"URL Parameters:"})," Extract parameters defined in the route path, often used for RESTful URLs."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Modify Response:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Setting Headers:"})," Modify HTTP response headers to control cache policies, content types, etc."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Write Response Body:"})," Send data back to the client, including HTML, JSON, XML, or plain text."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Status Codes:"})," Communicate the result of a request through ",(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status",children:"HTTP status codes"})," (e.g., 200 OK, 404 Not Found)."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Middleware Communication:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Data Sharing:"})," Share data between different pieces of middleware and handlers, enabling a flow of information through the request lifecycle."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Flow Control:"})," Control the flow of request processing, deciding whether to pass the context to the next middleware or terminate early."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Handling:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Centralized Error Management:"})," Collect and manage errors that occur during request processing, allowing for a consistent error response strategy."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Logging and Monitoring:"})," Attach errors and relevant data for logging and monitoring purposes, aiding in debugging and analysis."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Timeouts and Cancellation:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Request Timeouts:"})," Implement request timeouts, automatically aborting processing if it exceeds a certain duration."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cancellation Propagation:"})," Propagate cancellation signals through the processing pipeline, enabling resource cleanup and preventing unnecessary work."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Additional Utilities:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"File Upload Handling:"})," Manage file uploads, making it easier to process multipart form data."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"JSON/XML Binding:"})," Automatically bind request data to Go structs, simplifying the handling of incoming JSON or XML data."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Response Rendering:"})," Offer multiple methods for rendering responses, such as JSON, XML, HTML, and more, aiding in the creation of APIs and web applications."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Security and Authorization:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Authentication Data:"})," Store and retrieve user authentication information, useful in authorization middleware."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cross-Site Request Forgery (CSRF) Protection:"})," Utilize Gin's middleware to protect against CSRF attacks."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Session Management:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Session Variables:"})," Store and access session data, useful for maintaining state between requests."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"basic-example-usage",children:"Basic Example Usage"}),"\n",(0,i.jsxs)(n.p,{children:["Here are some basic examples of using ",(0,i.jsx)(n.code,{children:"Context"})," for certain functions, later we will see other ways of doing some of the things described below."]}),"\n",(0,i.jsxs)(n.p,{children:["Some examples use the ",(0,i.jsx)(n.a,{href:"https://pkg.go.dev/net/http",children:"http package"}),". The ",(0,i.jsx)(n.code,{children:"http"})," package is a core part of the Go standard library, used for building and handling HTTP client and server applications."]}),"\n",(0,i.jsx)(n.h3,{id:"access-request-data",children:"Access Request Data"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Extracting Query Parameters:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'// Assuming a query string like "?name=John&age=30"\nname := c.Query("name") // "John"\nage := c.DefaultQuery("age", "18") // "30", or "18" if not present\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Reading Form Values:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'// For a POST/PUT request with form data\nemail := c.PostForm("email")\npassword := c.DefaultPostForm("password", "default")\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"modify-response",children:"Modify Response"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Setting Headers:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'c.Header("Content-Type", "application/json")\nc.Header("Cache-Control", "no-cache")\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Sending JSON Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'c.JSON(http.StatusOK, gin.H{"status": "success", "data": dataObject})\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Returning Specific Status Codes:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"// For a not found scenario\nc.AbortWithStatus(http.StatusNotFound)\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"middleware-communication",children:"Middleware Communication"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Passing Data Between Middlewares:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'// In a middleware/handler\nc.Set("user", userInfo)\n\n// In a subsequent middleware/handler\nuser, _ := c.Get("user")\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Attaching an Error:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"if err != nil {\n  c.Error(err) // Add an error to the context\n}\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"timeouts-and-cancellation",children:"Timeouts and Cancellation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Implementing Request Timeout:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:"ctx, cancel := context.WithTimeout(c.Request.Context(), 10*time.Second)\ndefer cancel()\n// Use ctx for operations that should be canceled after the timeout\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"file-upload-handling",children:"File Upload Handling"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Processing File Uploads:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'file, _ := c.FormFile("upload")\nc.SaveUploadedFile(file, dstPath)\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"security-and-authorization",children:"Security and Authorization"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Retrieving Authentication Info:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'user, _ := c.Get("AuthenticatedUser")\n// Use user info for authorization checks\n'})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"session-management",children:"Session Management"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Accessing Session Variables:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-go",children:'session := sessions.Default(c)\nsessionUserID := session.Get("user_id")\n'})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>l,a:()=>a});var i=s(7294);const t={},r=i.createContext(t);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);